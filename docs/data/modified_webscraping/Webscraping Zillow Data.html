<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Finding Commercial Corridors in Philadelphia - Import Libraries</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Import Libraries</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../images/hip_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/LuckyLaharlTim/MUSA_5500_Final" rel="" title="Analysis Project GitHub" class="quarto-navigation-tool px-1" aria-label="Analysis Project GitHub"><i class="bi bi-github"></i></a>
    <a href="https://github.com/annaduan09" rel="" title="Anna Duan Github Profile" class="quarto-navigation-tool px-1" aria-label="Anna Duan Github Profile"><i class="bi bi-github"></i></a>
    <a href="https://github.com/TrevorKap" rel="" title="Trevor Kapuvari Github Profile" class="quarto-navigation-tool px-1" aria-label="Trevor Kapuvari Github Profile"><i class="bi bi-github"></i></a>
    <a href="https://www.linkedin.com/in/trevor-kapuvari-a25876253/" rel="" title="Trevor Kapuvari LinkedIn" class="quarto-navigation-tool px-1" aria-label="Trevor Kapuvari LinkedIn"><i class="bi bi-github"></i></a>
    <a href="https://github.com/LuckyLaharlTim" rel="" title="Timothy Oliver Github Profile" class="quarto-navigation-tool px-1" aria-label="Timothy Oliver Github Profile"><i class="bi bi-linkedin"></i></a>
    <a href="https://www.linkedin.com/in/timoliver200?lipi=urn%3Ali%3Apage%3Ad_flagship3_profile_view_base_contact_details%3BM4Ej%2F58xQdy7qwIFEM3FFw%3D%3D" rel="" title="Some Linked In" class="quarto-navigation-tool px-1" aria-label="Some Linked In"><i class="bi bi-linkedin"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About the Project</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../contact/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Contact Us</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contact/references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project References</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../analysis/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../analysis/methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Methods</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exploratory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exploring Philly’s Amenity Landscape</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../analysis/5-yelp_clean_and_explore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Yelp Amenity Data cleaning and exploratory analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../analysis/results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Limitations</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#set-path" id="toc-set-path" class="nav-link active" data-scroll-target="#set-path">Set Path</a></li>
  <li><a href="#create-a-file-name" id="toc-create-a-file-name" class="nav-link" data-scroll-target="#create-a-file-name">Create a file name</a></li>
  <li><a href="#main-webscraping" id="toc-main-webscraping" class="nav-link" data-scroll-target="#main-webscraping">Main Webscraping</a></li>
  <li><a href="#descriptions-from-for-sale-pages" id="toc-descriptions-from-for-sale-pages" class="nav-link" data-scroll-target="#descriptions-from-for-sale-pages">Descriptions from For Sale Pages</a></li>
  <li><a href="#testing-for-data-scrape-pipeline" id="toc-testing-for-data-scrape-pipeline" class="nav-link" data-scroll-target="#testing-for-data-scrape-pipeline">Testing for data scrape pipeline</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/LuckyLaharlTim/MUSA_5500_Final.git/blob/main/data/modified_webscraping/Webscraping Zillow Data.ipynb" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Import Libraries</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<ul>
<li>Request library allows you to send HTTP request in python to a specific URL. In our case we send an HTTP request to Zillow</li>
<li>Time module allows to handle time related task including formatting dates, waiting and representing time</li>
<li>The random module allows you to generate random</li>
<li>The bs4 module allows you to pull data from HTML document after you get a response from HTTP request</li>
<li>The os modules allows ou to interact with operating systems including changing working directory</li>
<li>The selenium module allows you to automate interaction with a web browser including sending URL request and extracting HTML document response</li>
</ul>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> random <span class="im">import</span> sample </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium <span class="im">import</span> webdriver</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.chrome.options <span class="im">import</span> Options</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium_stealth <span class="im">import</span> stealth</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="set-path" class="level3">
<h3 class="anchored" data-anchor-id="set-path">Set Path</h3>
<ul>
<li>Identify your destination folder</li>
<li>Use os change directory to set your destination directory as the default. That is where all outputs will be exported to</li>
</ul>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> <span class="st">"../webscraping_outputs-Z"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>os.chdir(path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-a-file-name" class="level3">
<h3 class="anchored" data-anchor-id="create-a-file-name">Create a file name</h3>
<ul>
<li>Create an outfile file name, I called mine ZillowSelium and formatted it a date time stamp</li>
<li>Note: If you are scraping multiple times in a day, then you need to format the time stamp with hours that way you don’t overwrite already exported data</li>
</ul>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>finalfile <span class="op">=</span> <span class="st">"ZillowSelenium"</span> <span class="op">+</span> <span class="st">"_"</span> <span class="op">+</span> <span class="st">"{:%Y_%h_</span><span class="sc">%d</span><span class="st">_%H-%M-%S}"</span>.<span class="bu">format</span>(datetime.now()) <span class="op">+</span><span class="st">".csv"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>finalfile</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>'ZillowSelenium_2023_Dec_09_21-04-27.csv'</code></pre>
</div>
</div>
</section>
<section id="main-webscraping" class="level3">
<h3 class="anchored" data-anchor-id="main-webscraping">Main Webscraping</h3>
<ul>
<li>Output results</li>
<li>Page numbers</li>
<li>URL</li>
<li>Selenium Setup</li>
</ul>
<div class="cell" data-execution_count="138">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create a list that will hold the results</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>titleSelector <span class="op">=</span> <span class="st">"h1.Text-c11n-8-84-3__sc-aiai24-0"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>descSelector <span class="op">=</span> <span class="st">"div.building-description"</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>linkSelector <span class="op">=</span> <span class="st">"div.StyledPropertyCardDataWrapper-c11n-8-84-3__sc-1omp4c3-0"</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span><span class="st">"https://www.zillow.com/philadelphia-pa/rentals/"</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>url2 <span class="op">=</span> <span class="st">"https://www.zillow.com/philadelphia-pa/for_sale/"</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect the zillow website and figure out the number pages for rental ads use</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># In the charlotte example, there are a total of 20 pages so I set the range at 21</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> page <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">21</span>,<span class="dv">1</span>):</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"This is page: "</span> <span class="op">+</span> <span class="bu">str</span>(page))</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Identify the Zillow URL of your City, it should follow this format:</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. Default Zillow url : https://www.zillow.com/</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. Name of your City: eg. charlotte-nc, atlanta-ga</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. Pass the page number </span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4. Add the "_p" that is a default thing with the Zillow website </span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 5. In a sample URL on page 15 for example will be like: https://www.zillow.com/charlotte-nc/rentals/15_p/</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    page <span class="op">=</span> <span class="bu">str</span>(page) <span class="op">+</span> <span class="st">'_p/'</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Here we are going to utilize the selenium. To automate the interaction behavior of a web browser you would</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># need a web driver. Each browser has a webdriver, in my case I am using google chrome so I download the web driver</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># from this website "https://chromedriver.storage.googleapis.com/index.html?path=98.0.4758.80/" </span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># After downloading and extracting the web drive(chromdriver.exe) you use the webdrive.Chrome() method to initiate</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># the chrome browser and pass the path where the driver is saved.</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>    textDriver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># CraiglistBrowser.maximize_window()</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># After the browser has been launched use the get() to pass the url </span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Urls:</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>    page_links <span class="op">=</span> []</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> url <span class="kw">in</span> [url,url2]: <span class="co"># getListingType():</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t\t</span><span class="sc">{</span>url<span class="op">+</span>page<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>        browser <span class="op">=</span> driver.get(url<span class="op">+</span>page)</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>        html <span class="op">=</span> driver.execute_script(<span class="st">"return document.documentElement.outerHTML"</span>)</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>        soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> item <span class="kw">in</span> soup.select(linkSelector):</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>            l <span class="op">=</span> item.select(<span class="st">"a"</span>)[<span class="dv">0</span>].attrs[<span class="st">"href"</span>]</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="kw">not</span>(l.startswith(<span class="st">"https://"</span>)):</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>                l <span class="op">=</span> <span class="st">"https://www.zillow.com"</span><span class="op">+</span>l</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>            page_links.append(l)</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> link <span class="kw">in</span> page_links:</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>        ovPage <span class="op">=</span> textDriver.get(link)</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>        textSoup <span class="op">=</span> BeautifulSoup(textDriver.page_source,<span class="st">"html.parser"</span>)</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(textSoup.select(<span class="st">"div.px-captcha-container"</span>)) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>            time.sleep(<span class="fl">0.3</span>)</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>            title <span class="op">=</span> textSoup.select(titleSelector)[<span class="dv">0</span>].text</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>            text <span class="op">=</span> textSoup.select(descSelector)[<span class="dv">0</span>].text</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>            results.append({</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>                <span class="st">"title"</span>: title,</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>                <span class="st">"description"</span>: text,</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>                <span class="st">"url"</span>: link</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"title: </span><span class="sc">{</span>title<span class="sc">}</span><span class="ch">\n</span><span class="ss">link</span><span class="sc">{</span>link<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>        time.sleep(<span class="fl">0.3</span>)</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(textDriver.getWebHandle())</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>    textDriver.close()</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>    time.sleep(<span class="fl">0.5</span>)</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>Zillowdata <span class="op">=</span>  pd.DataFrame(results)</span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>Zillowdata.to_csv(finalfile, index <span class="op">=</span> <span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>This is page: 1
Urls:

        https://www.zillow.com/philadelphia-pa/rentals/1_p/

        https://www.zillow.com/philadelphia-pa/for_sale/1_p/

This is page: 2
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/2_p/

        https://www.zillow.com/philadelphia-pa/for_sale/2_p/

This is page: 3
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/3_p/

        https://www.zillow.com/philadelphia-pa/for_sale/3_p/

This is page: 4
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/4_p/

        https://www.zillow.com/philadelphia-pa/for_sale/4_p/

This is page: 5
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/5_p/

        https://www.zillow.com/philadelphia-pa/for_sale/5_p/

This is page: 6
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/6_p/

        https://www.zillow.com/philadelphia-pa/for_sale/6_p/

This is page: 7
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/7_p/

        https://www.zillow.com/philadelphia-pa/for_sale/7_p/

This is page: 8
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/8_p/

        https://www.zillow.com/philadelphia-pa/for_sale/8_p/

This is page: 9
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/9_p/

        https://www.zillow.com/philadelphia-pa/for_sale/9_p/

This is page: 10
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/10_p/

        https://www.zillow.com/philadelphia-pa/for_sale/10_p/

This is page: 11
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/11_p/

        https://www.zillow.com/philadelphia-pa/for_sale/11_p/

This is page: 12
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/12_p/

        https://www.zillow.com/philadelphia-pa/for_sale/12_p/

This is page: 13
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/13_p/

        https://www.zillow.com/philadelphia-pa/for_sale/13_p/

This is page: 14
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/14_p/

        https://www.zillow.com/philadelphia-pa/for_sale/14_p/

This is page: 15
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/15_p/

        https://www.zillow.com/philadelphia-pa/for_sale/15_p/

This is page: 16
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/16_p/

        https://www.zillow.com/philadelphia-pa/for_sale/16_p/

This is page: 17
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/17_p/

        https://www.zillow.com/philadelphia-pa/for_sale/17_p/

This is page: 18
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/18_p/

        https://www.zillow.com/philadelphia-pa/for_sale/18_p/

This is page: 19
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/19_p/

        https://www.zillow.com/philadelphia-pa/for_sale/19_p/

This is page: 20
Urls:

        https://www.zillow.com/philadelphia-pa/for_sale/20_p/

        https://www.zillow.com/philadelphia-pa/for_sale/20_p/
</code></pre>
</div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span><span class="st">"https://www.zillow.com/philadelphia-pa/rentals/"</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>url2 <span class="op">=</span> <span class="st">"https://www.zillow.com/philadelphia-pa/for_sale/"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>page <span class="op">=</span> <span class="bu">str</span>(<span class="dv">1</span>) <span class="op">+</span> <span class="st">'_p/'</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>titleSelector <span class="op">=</span> <span class="st">"h1.Text-c11n-8-84-3__sc-aiai24-0"</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>descSelector <span class="op">=</span> <span class="st">"div.building-description"</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>linkSelector <span class="op">=</span> <span class="st">"div.StyledPropertyCardDataWrapper-c11n-8-84-3__sc-1omp4c3-0"</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>saleSelector <span class="op">=</span> <span class="st">"div.Text-c11n-8-84-3__sc-aiai24-0"</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>page_links <span class="op">=</span> []</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>driver.get(url2<span class="op">+</span>page)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.execute_script(<span class="st">"return document.documentElement.outerHTML"</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> soup.select(linkSelector):</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    l <span class="op">=</span> item.select(<span class="st">"a"</span>)[<span class="dv">0</span>].attrs[<span class="st">"href"</span>]</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span>(l.startswith(<span class="st">"https://"</span>)):</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>        l <span class="op">=</span> <span class="st">"https://www.zillow.com"</span><span class="op">+</span>l</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    page_links.append(l)</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>page_links</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>['https://www.zillow.com/homedetails/11102-Hendrix-St-Philadelphia-PA-19116/10531637_zpid/',
 'https://www.zillow.com/homedetails/706-Latona-St-UNIT-I-Philadelphia-PA-19147/2059089682_zpid/',
 'https://www.zillow.com/homedetails/6386-Sherwood-Rd-Philadelphia-PA-19151/10350074_zpid/',
 'https://www.zillow.com/homedetails/1419-S-51st-St-Philadelphia-PA-19143/10309619_zpid/',
 'https://www.zillow.com/homedetails/6123-Wayne-Ave-FLOOR-2-Philadelphia-PA-19144/2054310168_zpid/',
 'https://www.zillow.com/homedetails/3022-N-American-St-Philadelphia-PA-19133/118349697_zpid/',
 'https://www.zillow.com/homedetails/6424-City-Ave-Philadelphia-PA-19151/2054068561_zpid/',
 'https://www.zillow.com/homedetails/6506-N-Fairhill-St-Philadelphia-PA-19126/10545698_zpid/',
 'https://www.zillow.com/homedetails/118-S-21st-St-APT-1022-Philadelphia-PA-19103/2057852846_zpid/',
 'https://www.zillow.com/homedetails/1129-W-Duncannon-Ave-Philadelphia-PA-19141/10467823_zpid/',
 'https://www.zillow.com/homedetails/728-Charette-Rd-Philadelphia-PA-19115/10565703_zpid/']</code></pre>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>link<span class="op">=</span>page_links[<span class="dv">1</span>]</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>ovPage <span class="op">=</span> driver.get(link)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>textSoup <span class="op">=</span> BeautifulSoup(driver.page_source,<span class="st">"html.parser"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>sale2Selector <span class="op">=</span> <span class="st">"p.Text-c11n-8-84-3__sc-aiai24-0"</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>textSoup.select(saleSelector)[<span class="dv">0</span>].text</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>'The data relating to real estate for sale on this website appears in part through the BRIGHT Internet Data Exchange program, a voluntary cooperative exchange of property listing data between licensed real estate brokerage firms, and is provided by BRIGHT through a licensing agreement.\nListing information is from various brokers who participate in the Bright MLS IDX program and not all listings may be visible on the site. \nThe property information being provided on or through the website is for the personal, non-commercial use of consumers and such information may not be used for any purpose other than to identify prospective properties consumers may be interested in purchasing.\nSome properties which appear for sale on the website may no longer be available because they are for instance, under contract, sold or are no longer being offered for sale. \nProperty information displayed is deemed reliable but is not guaranteed. \nCopyright 2023 Bright MLS, Inc. Click here for more information\nThe listing broker’s offer of compensation is made only to participants of the MLS where the listing is filed.\n'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> results[:<span class="op">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>,<span class="bu">len</span>(page_links)):</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    link<span class="op">=</span>page_links[i]</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    ovPage <span class="op">=</span> driver.get(link)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    textSoup <span class="op">=</span> BeautifulSoup(driver.page_source,<span class="st">"html.parser"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> textSoup.select(titleSelector)[<span class="dv">0</span>].text</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(textSoup.select(descSelector))<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> <span class="bu">len</span>(textSoup.select(descSelector)[<span class="dv">0</span>].text)<span class="op">&gt;</span><span class="dv">70</span>:</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        text <span class="op">=</span> textSoup.select(descSelector)[<span class="dv">0</span>].text</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="bu">len</span>(textSoup.select(sale2Selector)[<span class="dv">0</span>]) <span class="kw">and</span> <span class="bu">len</span>(textSoup.select(sale2Selector)[<span class="dv">0</span>].text)<span class="op">&gt;</span><span class="dv">70</span>:</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span> textSoup.select(sale2Selector)[<span class="dv">0</span>].text</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="bu">len</span>(textSoup.select(saleSelector)[<span class="dv">0</span>])<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> <span class="bu">len</span>(textSoup.select(saleSelector)[<span class="dv">0</span>].text)<span class="op">&gt;</span><span class="dv">70</span>:</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span> textSoup.select(saleSelector)[<span class="dv">0</span>].text</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="st">""</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    results.append({</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"title"</span>: title,</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"description"</span>: text,</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">"url"</span>: link</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"title: </span><span class="sc">{</span>title<span class="sc">}</span><span class="ch">\n</span><span class="ss">link: </span><span class="sc">{</span>link<span class="sc">}</span><span class="ch">\n\n\t</span><span class="sc">{</span>text<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">"</span>)</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    time.sleep(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>title: 6386 Sherwood Rd,&nbsp;Philadelphia, PA 19151
link: https://www.zillow.com/homedetails/6386-Sherwood-Rd-Philadelphia-PA-19151/10350074_zpid/

    Zillow last checked:  3 hours ago


title: 1419 S 51st St,&nbsp;Philadelphia, PA 19143
link: https://www.zillow.com/homedetails/1419-S-51st-St-Philadelphia-PA-19143/10309619_zpid/

    Zillow last checked:  3 hours ago


title: 6123 Wayne Ave FLOOR 2,&nbsp;Philadelphia, PA 19144
link: https://www.zillow.com/homedetails/6123-Wayne-Ave-FLOOR-2-Philadelphia-PA-19144/2054310168_zpid/

    Likely to sell faster than 83 % nearby


title: 3022 N American St,&nbsp;Philadelphia, PA 19133
link: https://www.zillow.com/homedetails/3022-N-American-St-Philadelphia-PA-19133/118349697_zpid/

    Zillow last checked:  3 hours ago


title: 6424 City Ave,&nbsp;Philadelphia, PA 19151
link: https://www.zillow.com/homedetails/6424-City-Ave-Philadelphia-PA-19151/2054068561_zpid/

    Likely to sell faster than 99 % nearby


title: 6506 N Fairhill St,&nbsp;Philadelphia, PA 19126
link: https://www.zillow.com/homedetails/6506-N-Fairhill-St-Philadelphia-PA-19126/10545698_zpid/

    Zillow last checked:  3 hours ago

</code></pre>
</div>
</div>
</section>
<section id="descriptions-from-for-sale-pages" class="level3">
<h3 class="anchored" data-anchor-id="descriptions-from-for-sale-pages">Descriptions from For Sale Pages</h3>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>[{'title': '11102 Hendrix St,\xa0Philadelphia, PA 19116',
  'description': 'The data relating to real estate for sale on this website appears in part through the BRIGHT Internet Data Exchange program, a voluntary cooperative exchange of property listing data between licensed real estate brokerage firms, and is provided by BRIGHT through a licensing agreement.\nListing information is from various brokers who participate in the Bright MLS IDX program and not all listings may be visible on the site. \nThe property information being provided on or through the website is for the personal, non-commercial use of consumers and such information may not be used for any purpose other than to identify prospective properties consumers may be interested in purchasing.\nSome properties which appear for sale on the website may no longer be available because they are for instance, under contract, sold or are no longer being offered for sale. \nProperty information displayed is deemed reliable but is not guaranteed. \nCopyright 2023 Bright MLS, Inc. Click here for more information\nThe listing broker’s offer of compensation is made only to participants of the MLS where the listing is filed.\n',
  'url': 'https://www.zillow.com/homedetails/11102-Hendrix-St-Philadelphia-PA-19116/10531637_zpid/'},
 {'title': '706 Latona St UNIT I,\xa0Philadelphia, PA 19147',
  'description': 'The data relating to real estate for sale on this website appears in part through the BRIGHT Internet Data Exchange program, a voluntary cooperative exchange of property listing data between licensed real estate brokerage firms, and is provided by BRIGHT through a licensing agreement.\nListing information is from various brokers who participate in the Bright MLS IDX program and not all listings may be visible on the site. \nThe property information being provided on or through the website is for the personal, non-commercial use of consumers and such information may not be used for any purpose other than to identify prospective properties consumers may be interested in purchasing.\nSome properties which appear for sale on the website may no longer be available because they are for instance, under contract, sold or are no longer being offered for sale. \nProperty information displayed is deemed reliable but is not guaranteed. \nCopyright 2023 Bright MLS, Inc. Click here for more information\nThe listing broker’s offer of compensation is made only to participants of the MLS where the listing is filed.\n',
  'url': 'https://www.zillow.com/homedetails/706-Latona-St-UNIT-I-Philadelphia-PA-19147/2059089682_zpid/'}]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if len(textSoup.select("div.px-captcha-container")) &gt; 0:</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     time.sleep(3)</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     continue</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># else:</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># results=[]</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>title <span class="op">=</span> textSoup.select(titleSelector)[<span class="dv">0</span>].text</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">len</span>(textSoup.select(descSelector))<span class="op">&gt;</span><span class="dv">0</span>:</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> textSoup.select(descSelector)[<span class="dv">0</span>].text</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> <span class="bu">len</span>(textSoup.select(sale2Selector)[<span class="dv">0</span>]):</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    text<span class="op">=</span> textSoup.select(sale2Selector)[<span class="dv">0</span>].text</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> <span class="bu">len</span>(textSoup.select(saleSelector)[<span class="dv">0</span>])<span class="op">&gt;</span><span class="dv">0</span>:</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    text<span class="op">=</span> textSoup.select(saleSelector)[<span class="dv">0</span>].text</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>results.append({</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"title"</span>: title,</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"description"</span>: text,</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"url"</span>: link</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"title: </span><span class="sc">{</span>title<span class="sc">}</span><span class="ch">\n</span><span class="ss">link: </span><span class="sc">{</span>link<span class="sc">}</span><span class="ch">\n\n\t</span><span class="sc">{</span>text<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>title: 706 Latona St UNIT I,&nbsp;Philadelphia, PA 19147
link: https://www.zillow.com/homedetails/706-Latona-St-UNIT-I-Philadelphia-PA-19147/2059089682_zpid/

    Welcome to Maxim Plaza, a collection of ten luxury townhomes in the Passyunk Square neighborhood of Center City, Philadelphia. The “Brynn” is a 17-foot-wide home, spanning approximately 3,700 square feet and comprises of multiple outdoor spaces, 1-car parking,4-bedrooms, 3-full bathrooms, and 2-half bathrooms.   The living room; bright and ...   read more

</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> link <span class="kw">in</span> page_links:</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    ovPage <span class="op">=</span> textDriver.get(link)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    textSoup <span class="op">=</span> BeautifulSoup(textDriver.page_source,<span class="st">"html.parser"</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(textSoup.select(<span class="st">"div.px-captcha-container"</span>)) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        time.sleep(<span class="dv">3</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>        title <span class="op">=</span> textSoup.select(titleSelector)[<span class="dv">0</span>].text</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>        text <span class="op">=</span> textSoup.select(descSelector)[<span class="dv">0</span>].text</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>        results.append({</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"title"</span>: title,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">"description"</span>: text,</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"url"</span>: link</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"title: </span><span class="sc">{</span>title<span class="sc">}</span><span class="ch">\n</span><span class="ss">link</span><span class="sc">{</span>link<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    time.sleep(<span class="dv">3</span>)</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(textDriver.getWebHandle())</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>textDriver.quit()</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>results</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="co"># data = pd.Dataframe(results)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="testing-for-data-scrape-pipeline" class="level3">
<h3 class="anchored" data-anchor-id="testing-for-data-scrape-pipeline">Testing for data scrape pipeline</h3>
<div class="cell" data-execution_count="151">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>chrome_options <span class="op">=</span> Options()</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># sel_path = os.path.join(os.getcwd(), 'selenium_cookies')</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># chrome_options.add_argument("user-data-dir="+ sel_path)</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># chrome_options.add_argument("user-data-dir=selenium") </span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>chrome_options.add_argument(<span class="st">"--headless"</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>chrome_options.add_experimental_option(<span class="st">"excludeSwitches"</span>, [<span class="st">"enable-automation"</span>])</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>chrome_options.add_experimental_option(<span class="st">"useAutomationExtension"</span>, <span class="va">False</span>) </span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome(options<span class="op">=</span>chrome_options)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>stealth(driver,</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>       user_agent <span class="op">=</span> <span class="st">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.5481.105 Safari/537.36'</span>,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>       languages<span class="op">=</span>[<span class="st">"en-US"</span>, <span class="st">"en"</span>],</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>       vendor<span class="op">=</span><span class="st">"Google Inc."</span>,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>       platform<span class="op">=</span><span class="st">"Win32"</span>,</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>       webgl_vendor<span class="op">=</span><span class="st">"Intel Inc."</span>,</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>       renderer<span class="op">=</span><span class="st">"Intel Iris OpenGL Engine"</span>,</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>       fix_hairline<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>textDriver <span class="op">=</span> webdriver.Chrome(options<span class="op">=</span>chrome_options)</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>stealth(textDriver,</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>       user_agent <span class="op">=</span> <span class="st">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.5481.105 Safari/537.36'</span>,</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>       languages<span class="op">=</span>[<span class="st">"en-US"</span>, <span class="st">"en"</span>],</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>       vendor<span class="op">=</span><span class="st">"Google Inc."</span>,</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>       platform<span class="op">=</span><span class="st">"Win32"</span>,</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>       webgl_vendor<span class="op">=</span><span class="st">"Intel Inc."</span>,</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>       renderer<span class="op">=</span><span class="st">"Intel Iris OpenGL Engine"</span>,</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>       fix_hairline<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>       )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="152">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>url<span class="op">=</span><span class="st">"https://www.zillow.com/philadelphia-pa/rentals/"</span> <span class="co">#+str(page) + '_p/'</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>url2 <span class="op">=</span> <span class="st">"https://www.zillow.com/philadelphia-pa/for_sale/"</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># After the browser has been launched use the get() to pass the url </span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>browser <span class="op">=</span> driver.get(url)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.execute_script(<span class="st">"return document.documentElement.outerHTML"</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co"># CraiglistBrowser.quit()</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># print(url)</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>titleSelector <span class="op">=</span> <span class="st">"h1.Text-c11n-8-84-3__sc-aiai24-0"</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>descSelector <span class="op">=</span> <span class="st">"div.building-description"</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>linkSelector <span class="op">=</span> <span class="st">"div.StyledPropertyCardDataWrapper-c11n-8-84-3__sc-1omp4c3-0"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="get-webpage-for-overview" class="level4">
<h4 class="anchored" data-anchor-id="get-webpage-for-overview">Get webpage for overview</h4>
<div class="cell" data-execution_count="157">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># len(soup.select("div.StyledPropertyCardDataWrapper-c11n-8-84-3__sc-1omp4c3-0"))</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># soup.select("div.StyledPropertyCardDataWrapper-c11n-8-84-3__sc-1omp4c3-0")[0].select("a")[0].attrs["href"]</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>page_links <span class="op">=</span> []</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># soup = BeautifulSoup(driver.page_source, 'html.parser')</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> soup.select(linkSelector):</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    l <span class="op">=</span> item.select(<span class="st">"a"</span>)[<span class="dv">0</span>].attrs[<span class="st">"href"</span>]</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span>(l.startswith(<span class="st">"https://"</span>)):</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>        l <span class="op">=</span> <span class="st">"https://www.zillow.com"</span><span class="op">+</span>l</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    page_links.append(l)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>page_links</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="157">
<pre><code>['https://www.zillow.com/apartments/philadelphia-pa/the-ledger-residences/98vLHX/',
 'https://www.zillow.com/b/building/39.94893,-75.15103_ll/',
 'https://www.zillow.com/apartments/philadelphia-pa/the-national/B65ddJ/',
 'https://www.zillow.com/apartments/philadelphia-pa/the-legacy-at-powelton-village/98vHTJ/',
 'https://www.zillow.com/apartments/philadelphia-pa/the-grace/98wLDW/',
 'https://www.zillow.com/apartments/philadelphia-pa/the-hq/9PXKWh/',
 'https://www.zillow.com/homedetails/112-S-19th-St-A5AB73E33-Philadelphia-PA-19103/2054435564_zpid/',
 'https://www.zillow.com/apartments/philadelphia-pa/the-harper/9PWjcR/',
 'https://www.zillow.com/homedetails/112-S-19th-St-A6AD7858D-Philadelphia-PA-19103/2054435572_zpid/']</code></pre>
</div>
</div>
</section>
<section id="get-title-description-for-listing-maybe-address-toolikely-from-prior-though" class="level4">
<h4 class="anchored" data-anchor-id="get-title-description-for-listing-maybe-address-toolikely-from-prior-though">Get Title &amp; Description for listing (maybe address too–likely from prior though–)</h4>
<ul>
<li>Theoretically works, but zillow does human captcha whenever I get here.</li>
</ul>
<div class="cell" data-execution_count="154">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> link <span class="kw">in</span> page_links:</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    ovPage <span class="op">=</span> textDriver.get(link)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    textSoup <span class="op">=</span> BeautifulSoup(textDriver.page_source,<span class="st">"html.parser"</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(textSoup.select(<span class="st">"div.px-captcha-container"</span>)) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>        time.sleep(<span class="dv">3</span>)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>        title <span class="op">=</span> textSoup.select(titleSelector)[<span class="dv">0</span>].text</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>        text <span class="op">=</span> textSoup.select(descSelector)[<span class="dv">0</span>].text</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>        results.append({</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"title"</span>: title,</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">"description"</span>: text,</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"url"</span>: link</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"title: </span><span class="sc">{</span>title<span class="sc">}</span><span class="ch">\n</span><span class="ss">link</span><span class="sc">{</span>link<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    time.sleep(<span class="dv">3</span>)</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(textDriver.getWebHandle())</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>textDriver.quit()</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>results</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a><span class="co"># data = pd.Dataframe(results)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="154">
<pre><code>[]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="158">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>ovPage <span class="op">=</span> textDriver.get(page_links[<span class="dv">0</span>])</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>textSoup <span class="op">=</span> BeautifulSoup(textDriver.page_source,<span class="st">"html.parser"</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>title <span class="op">=</span> textSoup.select(titleSelector)[<span class="dv">0</span>].text</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> textSoup.select(descSelector)[<span class="dv">0</span>].text</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"title: </span><span class="sc">{</span>title<span class="sc">}</span><span class="ch">\n</span><span class="ss">link</span><span class="sc">{</span>link<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>MaxRetryError: HTTPConnectionPool(host='localhost', port=64216): Max retries exceeded with url: /session/7b3acff2f56d1ca1391088bb25b7487a/url (Caused by NewConnectionError('&lt;urllib3.connection.HTTPConnection object at 0x000001658E939390&gt;: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© CC-Anna Duan, Trevor Kapuvari, &amp; Timothy Oliver, 2023</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This page is built with ❤️ and <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>